{% extends 'crudromero/layout.html' %} {% block content %} {% load static %}
<script src="{% static 'js/chart.min.js' %}"></script>
<script src="{% static 'js/estadisticas.js' %}"></script>
<div class="card">
	<div class="card" style="background-color: #d8d8d8">
		<div class="row">
			<div class="col-md-4 mx-auto m-2 mt-3 mb-3">
				<div class="card text-center" style="background-color: #ffffff">
					<h3>Total de pacientes: {{total}}</h3>
				</div>
			</div>
		</div>

		<div class="row m-2">
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Tipo de internación</u></h5>
					{% if torta_internados %}
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas id="torta-internados" width="100%" height="100%"></canvas>
					</div>
					{% else %}
					<div class="my-auto">
						<h3>No hay datos para mostrar</h6>
					</div>
					{% endif %}
				</div>
			</div>
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Porcentaje de pacientes internados</u></h5>
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas id="total_pacientes" width="100%" height="100%"></canvas>
					</div>
				</div>
			</div>
		</div>
		<div class="row m-2 mb-2">
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Porcentaje de pacientes por derivación</u></h5>
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas
							id="torta_pacientes_por_derivacion"
							width="100%"
							height="100%"
						></canvas>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Región sanitaria</u></h5>
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas
							id="torta_por_region_sanitaria"
							width="100%"
							height="100%"
						></canvas>
					</div>
				</div>
			</div>
		</div>
		<div class="row m-2 mb-4">
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Barrios</u></h5>
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas id="torta_por_barrio" width="100%" height="100%"></canvas>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Pacientes por día</u></h5>
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas id="get_days_data" width="100%" height="100%"></canvas>
					</div>
				</div>
			</div>
		</div>
		<div class="row m-2 mb-4">
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Diagnóstico</u></h5>
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas id="enfermedad_mental" width="100%" height="100%"></canvas>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div
					class="card text-center h-100 my-auto mx-auto mb-4"
					style="background-color: #ffffff"
				>
					<h5 class="m-2"><u>Obra Social</u></h5>
					<div class="mx-auto" style="height: 50%; width: 50%">
						<canvas id="obra_social" width="100%" height="100%"></canvas>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	{% if torta_internados %}
		makeCharts('{{torta_internados | safe }}', 'torta-internados');
	{% endif %}
	makeCharts('{{torta_pacientes_total_internados | safe }}', 'total_pacientes');
	makeCharts(
		'{{torta_pacientes_por_derivacion | safe }}',
		'torta_pacientes_por_derivacion'
	);
	makeCharts(
		'{{torta_por_region_sanitaria | safe }}',
		'torta_por_region_sanitaria'
	);
	makeChartBarrio('{{torta_por_barrio | safe }}', 'torta_por_barrio');
	makeCharts2('{{get_days_data | safe }}', 'get_days_data');
	makeChartBarrio('{{enfermedad_mental | safe }}', 'enfermedad_mental');
	makeCharts('{{obra_social | safe }}', 'obra_social');
</script>
{% endblock %}
